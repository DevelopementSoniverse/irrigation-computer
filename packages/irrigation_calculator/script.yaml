script:
  irrigation_run:
    alias: "Irrigation Run"
    mode: single
    sequence:
      - service: switch.turn_on
        target:
          # Turn on the pump â€“ uses the relay selected in settings
          entity_id: "{{ states('input_select.irrigation_relay_entity') }}"
      - delay:
          seconds: "{{ states('input_number.watering_duration_sec') | int }}"
      - service: switch.turn_off
        target:
          # Toggle off the pump
          entity_id: "{{ states('input_select.irrigation_relay_entity') }}"
      - service: utility_meter.reset
        target:
          entity_id: sensor.radiation_since_irrigation

  irrigation_run_manual:
    alias: "Irrigation Run (Manual)"
    mode: single
    sequence:
      - service: input_select.select_option
        data:
          entity_id: input_select.irrigation_last_reason
          option: "Manual"
      - service: script.irrigation_run