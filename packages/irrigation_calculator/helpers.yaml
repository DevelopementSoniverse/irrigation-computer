# All helper entities for the irrigation calculator.
# NOTE: Adds fallback helpers and logging helpers.

input_number:
  threshold_rad_phase1:
    name: Radiation Threshold – Planting (Wh/m²)
    icon: mdi:sun-wireless
    min: 0
    max: 200
    step: 5
    unit_of_measurement: "Wh/m²"

  threshold_rad_phase2:
    name: Radiation Threshold – Fruit Set (Wh/m²)
    icon: mdi:sun-wireless
    min: 0
    max: 300
    step: 5
    unit_of_measurement: "Wh/m²"

  threshold_rad_phase3:
    name: Radiation Threshold – Ripening (Wh/m²)
    icon: mdi:sun-wireless
    min: 0
    max: 250
    step: 5
    unit_of_measurement: "Wh/m²"

  watering_duration_sec:
    name: Irrigation Duration (s)
    icon: mdi:clock-end
    min: 10
    max: 600
    step: 10
    unit_of_measurement: "s"

  irrigation_relais1_power_min:
    name: Undercurrent threshold Relay 1
    icon: mdi:flash-alert
    min: 0
    max: 100
    step: 1
    unit_of_measurement: W
    mode: slider

  irrigation_relais1_power_max:
    name: Over-current threshold Relay 1
    icon: mdi:flash-alert
    min: 0
    max: 1000
    step: 1
    unit_of_measurement: W
    mode: slider

  irrigation_fallback_minutes:
    name: Fallback Interval (min)
    icon: mdi:timer-outline
    min: 5         # constrained per request
    max: 240       # constrained per request
    step: 5
    unit_of_measurement: "min"
    initial: 60

input_boolean:
  irrigation_fallback_enabled:
    name: Irrigation Fallback Enabled
    icon: mdi:clock-alert

input_datetime:
  irrigation_fallback_start:
    name: Fallback Active From
    has_date: false
    has_time: true
  irrigation_fallback_end:
    name: Fallback Active Until
    has_date: false
    has_time: true
  irrigation_last_run:
    name: Last Irrigation Timestamp
    has_date: true
    has_time: true

input_select:
  tomato_phase:
    name: Tomato Growth Phase
    options:
      - Planting
      - Fruit Set
      - Ripening
    initial: Planting
    icon: mdi:sprout

  irrigation_relay_entity:
    name: Irrigation Relay Entity
    icon: mdi:electric-switch
    # Initial placeholder; the sync automation will replace options on startup.
    options:
      - switch.irrigation_relais1
    initial: switch.irrigation_relais1

  

  irrigation_last_reason:
    name: Last Irrigation Reason
    icon: mdi:information-outline
    options:
      - Manual
      - Radiation
      - Fallback
    initial: Manual