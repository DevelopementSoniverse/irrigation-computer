title: "Irrigation Control"
views:
  - title: "Control"
    path: control
    icon: mdi:sprinkler-variant

    cards:
      # ────────── Row 1 ────────────────────────────────────────────
      - type: vertical-stack
        title: "Row 1"
        cards:
          # System overview (compact)
          - type: glance
            title: "System"
            show_state: true
            entities:
              - entity: switch.irrigation_relais1
                name: "Pump"
              - entity: sensor.irrigation_relais1_power
                name: "Actual Power"
              - entity: sensor.irrigation_relais1_energy
                name: "Total Consumption"

          # ► Beide Karten nebeneinander
          - type: horizontal-stack
            cards:
              # Manual irrigation trigger
              - type: button
                name: "Manual Irrigation"
                icon: mdi:play-circle
                tap_action:
                  action: call-service
                  service: script.irrigation_run

              # Radiation gauge
              - type: gauge
                name: "Radiation since last irrigation"
                entity: sensor.radiation_since_irrigation
                min: 0
                max: 100
                needle: true
                segments:
                  - from: 0
                    color: "#9e9e9e"
                  - from: 45
                    color: "#00bcd4"
                    label: "Irrigation"

      # ────────── Weatherstation ──────────────────────────────────
      - type: vertical-stack
        title: "Weatherstation"
        cards:
          # Global radiation graph
          - type: sensor
            entity: sensor.global_radiation_energy
            name: "Global Radiation Energy"
            graph: line
            unit: "Wh/m²"

          # Manual radiation input
          - type: entities
            title: "Weatherstation – Manual Radiation Input"
            entities:
              - input_number.global_radiation
              - input_number.radiation_speed